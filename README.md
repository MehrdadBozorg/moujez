موجز: پیاده‌‌سازی و ارزیابی یک کارگزار خلاصه‌سازی خبر
==================================================
## چکیده
در این پروژه، ابتدا به بیان و پیاده سازی چند روش خلاصه سازی متن خواهیم پرداخت و تکنیک‌های خاصی را که منحصرا به خلاصه سازی خبر مربوط می‌شوند را توضیح می دهیم. سپس کارگزار[^1] خلاصه سازی خبر فارسی موجز، که از ترکیب چند روش خلاصه سازی آماری و یادگیری ماشین استفاده می‌ کند را معرفی می کنیم. موجز، از تکنیک‌های مربوط به پردازش زبان طبیعی و قواعد مربوط به زبان فارسی برای بهبود نتایج خود استفاده می کند. پس از پیاده سازی این سیستم با زبان برنامه نویسی پایتون، نتایج را با یک مجموعه‌ی خبر که توسط انسان خلاصه شده است مقایسه می کنیم و این سیستم را با روش های معمول ارزیابی سیستم های اتوماتیک خلاصه سازی،‌ می سنجیم. نشان خواهیم داد که در بدترین حالت،‌ در کیفیت خلاصه و معیاری هایی نظیر دقت[^2]و فراخوانی[^3]، نسبت به سیستم‌های مشابه بهبود نسبی حاصل شده است.


## مقدمه
در سال‌های اخیر نرخ رشد اطلاعات بسیار فزاینده است. با توجه به این افزایش حجم مستندات متنی، برای پاسخگویی به نیاز‌های اطلاعاتی کاربران، دیگر تکنیک‌های بازیابی اطلاعات به تنهایی کارا نیستند. از این رو خلاصه سازی متن‌ها به منظور فهم کلیه اطلاعات بااهمیت متن از جایگاه ویژه‌ای برخوردار است. این‌ کار منجر به استفاده از منابع بیشتر و با سرعت بالاتر و در نتیجه حاصل شدن اطلاعات غنی‌تر می‌شود. امروزه کارگزار‌های خلاصه‌ساز متن در خلاصه‌سازی اطلاعات پزشکی بیماران(مرجع؟)، سرویس‌های صوتی برای ناشنوایان(مرجع)، موتورهای جستجو(مرجع)، خلاصه‌سازی نامه‌‌های الکترونیکی(مرجع)، اخبار و غیره کاربرد دارند.


###انواع خلاصه سازی متن
در منابع(۲و ۳ مراجع اون مقاله هه:دی)، دسته بندی های مختلفی برای کارگزارهای خلاصه سازی معرفی شده است که وجوه مشترک بسیاری دارند:

* نوع خلاصه: به طور کلی خلاصه سازی به دونوع مستخرج[^4] و چکیده[^5] تقسیم بندی می شود. در خلاصه های مستخرخ، جملاتی از متن اصلی به عنوان جملات مهم از سند در خلاصه انتخاب می شوند اما در خلاصه های چکیده، خروجی  می تواند شامل جملات جدیدی بایشد که در برگیرنده اطلاعات مهم متن است، اکثر سیستم های خلاصه ساز، خلاصه های مستخرج تولید می کنند. (منبع : PARSUMITS)

* تعداد اسناد: کارگزار خلاصه ساز می تواند یک سند مجزا را خلاصه کند یا چندین سند را که یک رویداد را گزارش می دهند خلاصه کند.

* پارامتر: خلاصه یک متن یکسان می تواند برای هر کاربر، با توجه به ویژگی‌های شخصی وی، متفاوت باشد.(مرجع های شخصی سازی)ویژگی های کاربر می تواند به صورت هوشمند یا با پرسش از وی استخراج شود.

دسته بندی های دیگری نیز برای خلاصه سازی ارایه شده است، که به دلیل ارتباط کمتر، با این مطالعه‌ی موردی ذکر نشده است.


###چالش های پیش‌رو
* حفظ پیوستگی:‌ خلاصه سازی با رویکرد مستخرج، باعث حذف برخی از جملات می شود. ممکن است جملات متن خلاصه، دچار گسستگی و عدم ارتباط موضوعی با یکدیگر باشند.
* ضمایر سرگردان: ممکن است مرجع برخی ضمیرها مانند "وی" و "آن" در جملاتی باشد که حذف شده اند و خود جملات شامل این ضمیرها، در متن خلاصه شده آمده باشند. این موضوع باعث ابهام در درک مطلب توسط خواننده می شود.
* استاندارد متون: عدم رعایت استانداردی یکسان در متون خبری، به ویژه محتوای خبری که توسط خبرگزاری های فارسی تولید می‌شوند باعث ایجاد مشکل خواهد شد. به عنوان مثال، قرارندادن علایم نگارشی در یک متن باعث می شود که تحلیل گرهای زبان های طبیعی، دچار خطا شوند. خطا در تحلیل جایگاه کلمات، باعث خطا در تکنیک هایی که از ویژگی زبان استفاده می کنند خواهد شد.
* حجم خلاصه: یافتن میزان مطلوب کاهش حجم یک متن، توسط سیستم خلاصه ساز یکی از چالش های اصلی در زمینه پیاده سازی و ارزیابی سیستم های خلاصه سازی است.[مرجع دارم] 
* ارزیابی کیفیت خلاصه: ارزیابی خروجی سیستم خلاصه ساز گاهی از اوقات یک موضوع کیفی است[دنبال رفرنس برگردم]. در بعضی از موارد حتی مشاهده می شود که یک خلاصه توسط دوفرد مختلف متفاوت ارزیابی می شود. کمی نبودن برخی از معیارهای ارزیابی، یک چالش اساسی محسوب می‌شود.
* پردازش زبان فارسی: در توسعه این سیستم علاوه بر چالش های معمول های پردازش زبان طبیعی، مشکلات خاصی نیز وجود دارد که مرتبط با قواعد زبان فارسی هستند. مشکل دیگر در پردازش زبان فارسی کم بودن منابع زبانی مثل پیکره های متنی مناسب برای این زبان است(رفرنس)
* واکشی خبر: یافتن متن اصلی خبر و عنوان آن از صفحه وب یکی از مراحل کار خلاصه ساز است. این مرحله به دلیل گستردگی و تفاوت سایت‌های خبرگزاری ها یک چالش محسوب می‌شود.

## مراحل و روش‌های موجود
به طور کلی عمل خلاصه سازی در سه مرحله‌ی پیش‌پردازش، پردازش و تولید خلاصه انجام می‌شود. در خلاصه سازی اخبار، باید مرحله واکشی خبر را نیز به ابتدای این مراحل اضافه نماییم.

### واکشی خبر
اولین مرحله در تولید خلاصه خبری، واکشی خبر از صفحه‌ی وب است. واکشی متن و عنوان اصلی یک مقاله از صفحه وب، به دلیل یکسان نبودن سایت های مختلف نیاز به به‌کارگیری تکنیک های مختلفی دارد.(دنبال رفرنس بگردم)
برای این‌کار دو مرحله‌ی زیر، پیشنهاد می‌شود:
* تشخیصی بر پایه ساختار صفحات وب: سایت های خبرگزاری های فارسی، عموما از دو نرم افزار اتوماسیون خبرگزاری [ایران سامانه](http://iransamaneh.com/) و [استدیو خبر](http://www.news-studio.com/) استفاده می کنند. برای سایت هایی که از این دو سرویس استفاده می کنند می توان، با استفاده از تگ‌های html به راحتی و به طور دقیق، عنوان و متن اصلی خبر را استخراج کرد.
* روش های هوشمند: اگر ساختار html صفحه ای که لینک آن را داریم(مانند بالا) مشخص نبود باید بتوانیم متن اصلی را از آن استخراج کنیم. برای واکشی عنوان و متن اصلی مقاله، روش های زیر به ذهن می رسد:
1) برای پیدا کردن متن اصلی خبر، ابتدا تمامی تگ‌هایی مانند، تگ <p> را حذف می کنیم. سپس بزرگترین بخش های متن باقی مانده را به عنوان متن اصلی در نظر گرفته و واکشی می کنیم. برای یافتن عنوان خبر، می توان از تگ <title> استفاده کرد. اگر عنوان خبر در این تگ نبود می توان به دنبال تمامی تگ‌هایی گشت که یک متن را درشت می کنند.(مثل تگ h1 یا تگ b) 
اگر چندین گزینه برای انتخاب عنوان وجود داشت، ابتدا با یکی از روش های های یافتن کلمات کلیدی در متن(مانند روش tf-idf)، کلمات کلیدی مهم متن را استخراج می کنیم. سپس گزینه‌ای را انتخاب می کنیم که کلمات کلیدی بیشتری در آن وجود داشته باشد.(مرجع)
‌2) در صورت بهبود روش، در فاز بعدی روش‌های دیگری را ذکر می‌کنم.


### پیش‌پردازش
به دلیل عدم رعایت استانداردهای نگارشی زبان فارسی توسط منابع، پیش از انجام هر عملی به روی متنی که از صفحه وب واکشی شده است، باید پیش‌پردازش را انجام دهیم تا به متونی استاندارد برسیم. کارهای مرتبط پیشین(مرجع ها)، کارهای زیادی را برای پیش پردازش زبان فارسی پیش‌نهاد داده‌اند که البته برخی از آن‌ها،‌نادرست، فاقد دلیل منطقی و یا مغایر با شیوه‌ی درست نگارش زبان فارسی(http://www.persianacademy.ir/fa/das.aspx) به نظر می‌رسند و باعث پردازش اضافی بر روی متن می‌شوند. در زیر اعمالی را که برای پیش‌پردازش زبان فارسی، منطقی به نظر می رسد را ذکر می کنیم:
* تبدیل نویسه‌‌ «ي» و «ك» عربی به نوع فارسی آن‌ها
* تبدیل نویسه های «ؤ» به «و»، «ئ» به «ی» و «أ» به «ا»
* تبدیل حمزه‌ی آخر کلمات به «ی» با رعایت نیم فاصله مناسب
* اصلاح فاصله‌گذاری نادرست پرانتزها
* تبدیل اعداد عربی و انگلیسی به معادل فارسی آن‌ها
* رعایت نیم‌فاصله در پسوندهایی مانند «ها»، «تر»، «تری» و «ترین»
* رعایت نیم‌فاصله در ضمایر ملکی نظیر «ام»، «ای»، «ات» و «اش»
* رعایت نیم‌فاصله در پیشوندهایی همچون «نمی» و «می» در ابتدای فعل‌ها
* حذف بیش از یک علامت سوال یا علامت تعجب
* اصلاح کشیدگی کلماتی مانند «وحيـــــــد»
* حذف فاصله پس از پیشوند «بر» در واژه‌هایی مانند «بر می‌گردد»
* چسباندن علایم نگارشی مانند نقطه و علامت سوال به انتهای جمله


### پردازش

### تولید خلاصه
#### روش TF-ISF
این روش برگرفته از معیار فرکانس کلمه - معکوس فرکانس سند در بازیابی اطلاعات می باشد. فرکانس یک کلمه، تعداد تکرار آن در متن است. فرکانس جمله، تعداد جملات سند اس که حاوی آن کلمه هستند. این مشخصه بعد از حذف تمامی کلمات ایست(پاورقی)، برای تمام کلمات هر جمله محاسبه می شود. وزن هر جمله از مجوع وزن کلمات آن جمله تقسیم بر تعداد کلمات آن بدست می آید و در نهایت، بسته به حجم دلخواه خلاصه جملات با بیشترین وزن انتخاب می شوند. فرمول این روش به فرمت زیر است:

$$ tf_{i,j} =  \frac{ freq_ {i,j} }{ max_ {l}  freq_ {l,j} } (1)$$ 

$$ isf_ {i} $$ = \log \frac {N}{n_ {i}} (2)$$

$is_ {i}$
در این رابطه $is_ {i}$  تعداد تکرار کلمه و $$ isf_ {i} $$ بیانگر عکس تعداد تکرار جمه از کلمه i ام است.  در رابطه ۲، N تعداد کل جملات و $$ n_ {i} $$ تعد$is_ {i}$اد جملاتی است که در آن کلمه i ام وجود دارد.

سپس وزن هر کلمه را از فرمول زیر محاسبه می کنیم.

$$ w_ {i,j} = tf_{i,j} \times  isf_ {i}$$


در نهایت وزن جملات را از تقسیم مجموع وزن کلمات آن جمله بر تعداد کلمات آن بدست می آوریم.

‌‌#### روش مبتنی بر گراف

روش مبتنی بر یافتن کوتاه ترین مسیر
#### روش های مبنی بر زنجیره لغوی


#### روش های مبتنی بر یادگیری

#### روش مبتنی بر ضریب خوشه بندی و ارزیابی ترایایی

#### روش مبتنی بر تئوری فراکتال ها

#### روش پیشنهادی

## ارزیابی
ارزیابی کارگزار خلاصه ساز متن، یک فرایند پیچیده است. زمانی که ما از ارزیابی یک سیستم خلاصه ساز، صحبت می‌کنیم باید حداقل دو ویژگی را اندازه گیری کنیم: نسبت فشردگی [^6] (چه میزان متن خلاصه شده،‌ کوتاه‌تر از متن اصلی است؟)

$$ CR =  \frac{lengthof Summary}{length of Full Text} $$
و نسبت نگهداری(چه میزان از اطلاعات نگهداری شده است؟)
$$ RR =  \frac{information in Summary}{information Full Text} $$

برای هر معمولا ارزیابی‌های زیر برای یک سیستم خلاصه ساز معرفی می‌شود:
### ارزیابی ذاتی[^7]
تمرکز روش های ارزیابی ذاتی بر روی پیوستگی و اطلاع‌رسانی خلاصه ها است و تنها کیفیت خروجی بدون توجه به هدف نهایی مورد سنجش قرار می گيرد.
#### پیوستگی خلاصه
گاهی اوقات، جملاتی که در خلاصه‌هایی که به روش مستخرج تولید می شوند دچار بی ارتباطی معنایی در دنباله جملات هستند. یکی سنجه‌ی پیوستگی خلاصه، درجه بندی جمله‌ها بر حسب میزان پیوستگی‌شان است. سپس باید درجه جملات خلاصه با امتیازات خلاصه های مرجع، با امتیازا جملات منبع، با با امتیازات سایز سیستم‌های خلاصه ساز، مقایسه شود.
#### Summary Informativeness

#### فراخوانی و دقت
از جمله معیارهای استاندارد در بازیابی اطلاعات، فراخوانی و دقت هستند: فراخوانی برابر با نسبت تعداد جملاتی که توسط سیستم درست تشخیص داده شده بر تعداد جملاتی که توسط سیستم معیار درست تشخیص داده شده اند،
$$ Precision Rate =  \frac{Number of Correctly Selected Sentences}{Totoal Number of Selected Sentences} $$
همچنین دقت برابر است با نسبت تعداد جملاتی که توسط سیستم درست تشخیص داده شده اند بر تعداد کل جملاتی که توسط سیستم برای خلاصه ایجاد شده اند،

$$ Recall Rate =  \frac{Number of Correctly Selected Sentences}{Totoal Number of Correct Sentences} $$

از ترکیب این دو معیار، معیاری تحت عنوان F-Measure ایجاد می‌شود.

#### رتبه‌ی جملات

#### امتیاز BLEU


### ارزیابی بیرونی[^8]
تمرکز اصلی در ارزیابی بیرونی، به روی کاربر است. در این روش میزان موثر بودن و قابلیت پذیرش خلاصه‌های تولید شده، با برخی از روش ها مثل ارزیابی رابطه ای یا خوانایی متن خلاصه، سنجیده می شود.
چندین سناریوی بازی به روش های سطحی برای ارزیابی خلاصه، پیشنهاد داده شده که در زیر تعدادی از آن ها را معرفی می کنیم:
#### بازی شانون
#### بازی سوال
#### بازی دسته بندی
#### کلمات کلیدی انجمنی
 
#پیاده‌سازی
این پروژه با زبان برنامه‌نویسی پایتون پیاده سازی شده است. سورس پروژه را می توانید از [اینجا](https://bitbucket.org/vahidkharazi/moujez)مشاهده کنید. 


# مراجع

+ Hovy, Eduard, and Chin-Yew Lin. "Automated text summarization and the SUMMARIST system." Proceedings of a workshop on held at Baltimore, Maryland: October 13-15, 1998. Association for Computational Linguistics, 1998.
+ Das, Dipanjan, and André FT Martins. "A survey on automatic text summarization." Literature Survey for the Language and Statistics II course at CMU 4 (2007): 192-195.
+ [م.عبدوس، بررسی روش‌های خلاصه‌سازی خودکار متون و پیاده‌سازی یک نمونه عملی برای زبان فارسی، پایان‌نامه کارشناسی، دانشگاه علم و صنعت ایران، ۱۳۹۲](http://bayanbox.ir/id/4450824027451101101?download) 

# پیوندهای مفید
+ [پردازش زبان فارسی در پایتون](http://www.sobhe.ir/hazm)
+ [اسلایدهای خلاصه‌سازی متن درس تکنولوژی زبانی دانشگاه  سارلند](http://www.coli.uni-saarland.de/courses/LT1/2012/slides/summarization_lecture_WS1213.pdf)
+ [خلاصه‌سازی متن با استفاده از TextRank](http://joshbohde.com/blog/document-summarization)
+ [online Text Summarization](http://www.tools4noobs.com/summarize/)
+ [Text Summarization handbook](http://www.isi.edu/natural-language/people/hovy/papers/05Handbook-Summ-hovy.pdf)



[^1]: Agent
[^2]: Precision
[^3]: Recall
[^4]: Extract
[^5]: Abstract
[^6]: Compression Ratio
[^7]: Intrinsic Evaluation
[^8]: Extrinsic Evaluation


